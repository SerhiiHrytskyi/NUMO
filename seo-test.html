<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Test - NUMO</title>
    <script src="js/seo.js"></script>
    <script src="js/i18n.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        .content {
            padding: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .test-section h2 {
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .status {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.warning {
            background: #fff3cd;
            color: #856404;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .meta-list {
            list-style: none;
            margin-top: 15px;
        }
        .meta-list li {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .meta-list strong {
            color: #667eea;
            min-width: 200px;
        }
        .meta-value {
            flex: 1;
            text-align: right;
            font-family: monospace;
            font-size: 0.9em;
            word-break: break-all;
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            margin: 5px;
            transition: transform 0.2s;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        .actions {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-top: 2px solid #e9ecef;
        }
        .json-display {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 400px;
            overflow-y: auto;
        }
        .icon {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç SEO Test Dashboard</h1>
            <p>NUMO Energy Solutions - SEO Implementation Test</p>
        </div>
        
        <div class="content">
            <!-- Meta Tags Section -->
            <div class="test-section">
                <h2>
                    <span class="icon">üìù</span>
                    Meta Tags
                    <span id="meta-status" class="status">Checking...</span>
                </h2>
                <ul class="meta-list" id="meta-tags"></ul>
            </div>

            <!-- Open Graph Section -->
            <div class="test-section">
                <h2>
                    <span class="icon">üì±</span>
                    Open Graph Tags
                    <span id="og-status" class="status">Checking...</span>
                </h2>
                <ul class="meta-list" id="og-tags"></ul>
            </div>

            <!-- Structured Data Section -->
            <div class="test-section">
                <h2>
                    <span class="icon">üèóÔ∏è</span>
                    Structured Data (JSON-LD)
                    <span id="schema-status" class="status">Checking...</span>
                </h2>
                <div id="schema-data"></div>
            </div>

            <!-- Hreflang Section -->
            <div class="test-section">
                <h2>
                    <span class="icon">üåê</span>
                    Multilingual (Hreflang)
                    <span id="hreflang-status" class="status">Checking...</span>
                </h2>
                <ul class="meta-list" id="hreflang-tags"></ul>
            </div>

            <!-- Canonical Section -->
            <div class="test-section">
                <h2>
                    <span class="icon">üîó</span>
                    Canonical URL
                    <span id="canonical-status" class="status">Checking...</span>
                </h2>
                <ul class="meta-list" id="canonical-url"></ul>
            </div>
        </div>

        <div class="actions">
            <button class="btn" onclick="runTests()">üîÑ Re-run Tests</button>
            <button class="btn" onclick="testLanguage('de')">üá©üá™ Test German</button>
            <button class="btn" onclick="testLanguage('fr')">üá´üá∑ Test French</button>
            <button class="btn" onclick="testLanguage('en')">üá¨üáß Test English</button>
            <button class="btn" onclick="window.location.href='index.html'">‚Üê Back to Home</button>
        </div>
    </div>

    <script>
        function runTests() {
            testMetaTags();
            testOpenGraph();
            testStructuredData();
            testHreflang();
            testCanonical();
        }

        function testMetaTags() {
            const metaList = document.getElementById('meta-tags');
            const status = document.getElementById('meta-status');
            metaList.innerHTML = '';

            const metas = [
                { name: 'Title', value: document.title },
                { name: 'Description', value: document.querySelector('meta[name="description"]')?.content },
                { name: 'Keywords', value: document.querySelector('meta[name="keywords"]')?.content },
                { name: 'Robots', value: document.querySelector('meta[name="robots"]')?.content },
                { name: 'Viewport', value: document.querySelector('meta[name="viewport"]')?.content },
                { name: 'Charset', value: document.charset },
                { name: 'Language', value: document.documentElement.lang }
            ];

            let hasIssues = false;
            metas.forEach(meta => {
                const li = document.createElement('li');
                const value = meta.value || '‚ùå Missing';
                if (!meta.value) hasIssues = true;
                
                li.innerHTML = `<strong>${meta.name}:</strong><span class="meta-value">${value}</span>`;
                metaList.appendChild(li);
            });

            status.className = 'status ' + (hasIssues ? 'warning' : 'success');
            status.textContent = hasIssues ? '‚ö†Ô∏è Some missing' : '‚úÖ All present';
        }

        function testOpenGraph() {
            const ogList = document.getElementById('og-tags');
            const status = document.getElementById('og-status');
            ogList.innerHTML = '';

            const ogTags = [
                'og:title', 'og:description', 'og:type', 'og:url', 
                'og:image', 'og:site_name', 'og:locale',
                'twitter:card', 'twitter:title', 'twitter:description'
            ];

            let hasIssues = false;
            ogTags.forEach(tag => {
                const meta = document.querySelector(`meta[property="${tag}"], meta[name="${tag}"]`);
                const li = document.createElement('li');
                const value = meta?.content || '‚ùå Missing';
                if (!meta) hasIssues = true;
                
                li.innerHTML = `<strong>${tag}:</strong><span class="meta-value">${value}</span>`;
                ogList.appendChild(li);
            });

            status.className = 'status ' + (hasIssues ? 'warning' : 'success');
            status.textContent = hasIssues ? '‚ö†Ô∏è Some missing' : '‚úÖ All present';
        }

        function testStructuredData() {
            const container = document.getElementById('schema-data');
            const status = document.getElementById('schema-status');
            const scripts = document.querySelectorAll('script[type="application/ld+json"]');

            if (scripts.length === 0) {
                container.innerHTML = '<p style="color: #721c24;">‚ùå No structured data found</p>';
                status.className = 'status error';
                status.textContent = '‚ùå Missing';
                return;
            }

            container.innerHTML = '';
            scripts.forEach((script, index) => {
                const json = JSON.parse(script.textContent);
                const pre = document.createElement('div');
                pre.className = 'json-display';
                pre.textContent = JSON.stringify(json, null, 2);
                
                const title = document.createElement('h4');
                title.textContent = `Schema ${index + 1}: ${json['@type']}`;
                title.style.marginTop = index > 0 ? '15px' : '0';
                title.style.color = '#667eea';
                
                container.appendChild(title);
                container.appendChild(pre);
            });

            status.className = 'status success';
            status.textContent = `‚úÖ ${scripts.length} schemas`;
        }

        function testHreflang() {
            const list = document.getElementById('hreflang-tags');
            const status = document.getElementById('hreflang-status');
            const links = document.querySelectorAll('link[rel="alternate"][hreflang]');
            
            list.innerHTML = '';
            
            if (links.length === 0) {
                list.innerHTML = '<li>‚ùå No hreflang tags found</li>';
                status.className = 'status error';
                status.textContent = '‚ùå Missing';
                return;
            }

            links.forEach(link => {
                const li = document.createElement('li');
                li.innerHTML = `<strong>${link.hreflang}:</strong><span class="meta-value">${link.href}</span>`;
                list.appendChild(li);
            });

            status.className = 'status success';
            status.textContent = `‚úÖ ${links.length} links`;
        }

        function testCanonical() {
            const list = document.getElementById('canonical-url');
            const status = document.getElementById('canonical-status');
            const canonical = document.querySelector('link[rel="canonical"]');
            
            list.innerHTML = '';
            
            if (!canonical) {
                list.innerHTML = '<li>‚ùå No canonical URL found</li>';
                status.className = 'status error';
                status.textContent = '‚ùå Missing';
                return;
            }

            const li = document.createElement('li');
            li.innerHTML = `<strong>Canonical:</strong><span class="meta-value">${canonical.href}</span>`;
            list.appendChild(li);

            status.className = 'status success';
            status.textContent = '‚úÖ Present';
        }

        function testLanguage(lang) {
            if (typeof i18n !== 'undefined') {
                i18n.switchLanguage(lang).then(() => {
                    setTimeout(runTests, 500);
                    alert(`Switched to ${lang.toUpperCase()}. SEO tags should update automatically.`);
                });
            } else {
                alert('i18n module not loaded. Please test on actual site pages.');
            }
        }

        // Run tests on load
        window.addEventListener('load', runTests);

        // Re-run tests after language change
        window.addEventListener('languageChanged', () => {
            setTimeout(runTests, 100);
        });
    </script>
</body>
</html>
